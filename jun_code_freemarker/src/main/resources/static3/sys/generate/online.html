<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>代码生成</title>
    <!-- <link rel="stylesheet" href="${ctxPath}/assets/libs/layui/css/layui.css"/>
    <link rel="stylesheet" href="${ctxPath}/assets/module/admin.css"> -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="../../assets/css/gougu.css?v=1.0.24" media="all">
</head>
<body>
<!-- 正文开始 -->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-body">

        </div>
    </div>
</div>

<!-- 表格操作列 -->
<!-- perm-show="codeGenerate:run"
perm-show="codeGenerate:config"
perm-show="codeGenerate:edit"
perm-show="codeGenerate:delete" -->
<script type="text/html" id="tableBar">
    <a class="layui-btn layui-btn-warm layui-btn-xs"  lay-event="run">开始生成</a>
    <a class="layui-btn layui-btn-primary layui-btn-xs"  lay-event="config">配置</a>
    <a class="layui-btn layui-btn-primary layui-btn-xs"  lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs"  lay-event="delete">删除</a>
</script>

<!-- js部分 -->
<!-- <script src="${ctxPath}/assets/libs/layui/layui.js"></script>
<script src="${ctxPath}/assets/js/common.js"></script> -->
<!-- /脚本 -->
<!-- <script type="text/javascript"  src="../../assets/js/jquery.js"></script> -->
<script type="text/javascript"  src="../../assets/layui/layui.js"></script>
<script type="text/javascript"  src="../../assets/gouguInit.js"></script>
<script type="text/javascript"  src="../../assets/js/core.util.js"></script>
<script>
    layui.use(['layer', 'table', 'tableX', 'notice', 'xnUtil', 'tool'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var table = layui.table;
        var tableX = layui.tableX;
        var admin = layui.admin;
        var form = layui.form;
        var notice = layui.notice;
        var xnUtil = layui.xnUtil;
        var tool = layui.tool;


        // 显示表单弹窗
        function showAddOrUpdateModel(data) {
            // var layIndex = admin.open({
            //     title: (data ? '修改' : '添加') + '代码生成配置',
            //     url: getProjectUrl() + 'sys/generate/form.html',
            //     area: ['1000px','400px'],
            //     data: { data: data },     // 传递数据到表单页面
            //     end: function () {
            //         var layerData = admin.getLayerData(layIndex, 'formOk');
            //         if (layerData) {  // 判断表单操作成功标识
            //             insTb.reload();  // 成功刷新表格
            //         }
            //     },
            //     success: function (layero, dIndex) {
            //         // 弹窗超出范围不出现滚动条
            //         $(layero).children('.layui-layer-content').css('overflow', 'visible');
            //         $(layero).find('[lay-submit]').focus();
            //     }
            // });
            var id = "";
            if(data) id = data.id;
            var pagetId = '/sys/generate/form.html';
            CoreUtil.setData(pagetId,data);
            var editData = CoreUtil.getData(pagetId);
            console.log("editData="+JSON.stringify(editData));
            var layIndex = tool.side('/sys/generate/form.html?id=' + id,1200,function () {
                var layerIsOk = CoreUtil.getData(pagetId+'-formOk');
                if (layerIsOk) {  // 判断表单操作成功标识
                    insTb.reload();  // 成功刷新表格
                }
            });
            console.log("layIndex="+layIndex);
        }
    });
</script>
</body>
</html>
